# 2026-02-20 Memory Log

## Critical Configuration Repairs (10:00-11:00 CET)
**Issue:** Global default `sonnet` (via OpenRouter alias) was triggering `402 Payment Required` errors due to empty credits, despite available Anthropic OAuth plan. Fallback chain (`deepseek`, `grok`) also failed on credits.
**Fix:**
1.  **Global Default Reset:** Reverted system-wide default to `google/gemini-3-flash-preview` (Native).
2.  **Session Pinning:** Locked current `#audit` session to `anthropic/claude-sonnet-4-6` (Native/OAuth) to prevent context overflow loops.
3.  **Fallback Cleanup:** Cleared polluted fallback list; set new clean chain: `gemini-3-pro` (1st) â†’ `sonnet-4-6` (2nd).

## Security Audit Actions (17:00 CET)
**Scope:** Addressing findings from `audit-report-2026-02-18.md`.

**1. Small Model Sandboxing (CRITICAL #1) - [FIXED]**
-   **Finding:** `ollama/llama3.2:3b` had web tools enabled without sandbox.
-   **Action:** Manually patched `~/.openclaw/openclaw.json` to deny `group:web` and `browser` for this specific model.
-   **Correction:** Initially failed with `openclaw config` command (incorrect schema assumption); resolved via direct JSON edit.

**2. Gateway Stability (CRITICAL #2) - [MONITORING]**
-   **Finding:** 100+ restarts in logs.
-   **Status:** Gateway currently stable (PID 38422, running ~1h). No active crash loop observed during audit.
-   **Suspect:** Potential resource contention with `mission-control` dev server (PID 11664) on port 3000.

**Next Steps:**
-   Address Critical #3: Fix `#ai-news` channel (requires full stop/start).
-   Continue with High priority items from audit report.

## Gateway & Config Fixes (17:45 CET)
**3. Gateway Stability (CRITICAL #2) - [FIXED]**
-   **Finding:** Conflicting `ai.openclaw.mac` service (Desktop App) running alongside CLI gateway on port 18789.
-   **Action:** Disabled service (`launchctl bootout` + disabled plist), deleted `/Applications/OpenClaw.app`.
-   **Result:** Gateway stable (PID 42171), conflicts resolved.

**4. Exec Permissions (Enhancement) - [COMPLETE]**
-   **Finding:** `exec.ask` was set to `"always"`, causing friction for routine commands.
-   **Action:** Updated `~/.openclaw/openclaw.json` to `"exec": { "ask": "on-miss" }`.
-   **Result:** Approved routine commands run silently; new/suspicious ones still prompt.
